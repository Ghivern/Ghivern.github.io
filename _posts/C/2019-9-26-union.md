---
title: 共用体和枚举类型
tags: [C语言]
---

>> 记录以前自己没有用过的共用体

>> 其实公用的的声明定义格式和结构体相同，不同成员存储方式不同，结构体的每个成员分别占据一段内存空间，而共用体的各个成员共用一块内存空间，空间大小等于占据空间最大的成员所占字节数，在同一时刻，一个共用体只能存储一个成员的值

# 共用体

## 一、声明格式和定义格式

和结构体相同，只不过将关键字改成union

-----------

## 二、注意

### 1.初始化列表中只能有一个值，并初始化第一个成员

### 2.对其他成员赋值将覆盖前原来存储的值

### 3.共用体变量地址和各成员地址相同

### 4.老的C版本不能将共用体变量作为函数参数(C99允许)，但是可以将指向共用体的指针作为参数

-----

## 三、使用共用体情况举例

```c
//用一个结构体存储教师和学生信息，对于这两个不同的对象，大部分数据项相同，只有一项不同class/position,
//用共用体存储这两个成员
//当job==s,操作category.class；当job==t,操作category.position
struct{
	int num;
	char name[10];
	char sex;
	char job;
	union{
		int class;
		char position[10];
	}category;
}person[2]; 
```

<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>


> 记录枚举类型

> 适用于一个变量只有几种可能取值，可以一一列举出来

# 枚举类型

## 一、声明格式和定义变量格式

```c
enum test{a,b,c}value;  //未给枚举类型命名
enum Weekend{sun,mon,tue,wed,thu,fri,sat};  //命名的枚举类型
enum Weekend workday;
```

### 1.花括号中的值称为枚举元素(常量)，是用户指定的名字，是用标识符表示的常量，不能进行赋值操作

### 2.workday称为枚举变量，其取值只限于花括号中的值之一

### 3.每个枚举元素代表一个整数，C编译器按照定义顺序默认赋值为0，1，3，4，...，因此`workday=sun;`语句相当于`workday=0`,且可直接按照整形的方式操作枚举类型变量

### 4.也可人为指定枚举元素对应的值

```c
enum test{aa=6,bb=1,cc,dd,ee};
//bb以后的值按顺序加一
```