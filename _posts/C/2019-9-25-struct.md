---
title: 关于C语言的结构体
tags: [C语言]
---

> 记录关于C结构体的声明，定义和初始化

> 结构体相当于用户可定制的数组，结构体可以由不同基本数据类型组成

## 一、结构体声明与使用

### 1.声明语法格式

```c
struct struct_name{
	//成员定义
	int a;
};

struct struct_name{
	...
}v1,v2,v3[5];   //声明结构体的同时定义变量

struct{  //声明没有名字的结构体，这时声明的过程中定义变量，结构体的声明才有意义
	...
}v3,v4,v5[7];
```

### 2.结构体类型定义变量格式

```c
struct struct_name value;

struct struct_name value[6];  //定义结构体数组

//在声明结构体的同时定义变量
struct struct_name{
	...
}value,g[6];
```

-------------------------


## 二、结构体类型定义的变量的存储空间

结构体类型变量在内存中的分布和数组类似的，按成员定义的先后顺序存储

结构体数组，是将数组的的每个元素设置成结构体类型，使用方法与普通数组一样

------------------------


## 三、结构体变量的初始化

### 1.使用花括号，按从前往后顺序全部或部分初始化成员

```c
struct test{
	int a;
	char b;
	int c;
};
struct test a = {1};  //部分初始化成员，此时剩余成员系统将赋初始，比如int类型赋1，char类型赋空字符,指针初始化为NULL
struct test b = {4,'v',6}; //初始化全部成员

struct test c[5] = {1,'2',3,4};  //只是初始化c[0].a、c[0].b、c[0].c、c[1].a,其他赋予默认值
struct test d[2] = {
	{1,'v',5},
	{3,'g',6}
};   //结构更清晰的初始化方法
```

### 2.对某一成员初始化(c99支持)(C++不支持)


```c
struct test b = {.b = 100,.a = 500};  //其他未指定数据成员初始化为默认值
```

----------------------


## 四、引用结构体变量的值

使用运算符'.'

```c
struct test v;
printf("%d\n",v.b);
```

注：a.不能直接对结构体变量整体直接进行输出操作，只能通过引用操作结构体中的基本数据类型
    b.若结构体中由结构体变量，则可以嵌套引用，如

```c
struct a{
	int a;
}; 
struct b{
	struct a g;
};
struct b v;
printf("%d\n",v.g.a);
```

----------------------


## 五、结构体指针

### 1.定义指针变量

和普通指针变量定义一样，需要之处类型，如`struct test * p;`

### 2.通过指针引用结构体中的元素

a.格式	`(*p).a` 

b.此时括号不能省略，由于.运算符的优先级大于取值运算符\*；若省略则相当于`*(p.a)`,这显然是错误的

c.为了直观和方便，c语言允许使用`p->a`代替`(*p).a`,前者表示p所指向结构体变量中的a成员;'->称为指向运算符'

### 3.指向结构体数组的指针(类似于数组的指针)

### 4.允许直接取结构体元素的地址，如`int * intP = &(p->a);`,将p所指向结构体中的a成员地址赋值给intP;

--------------------
